{% extends 'base.html' %} {% load static %} {% block title %} Productos Listados
{% endblock title %} {% block main %}

<head>
  <link rel="stylesheet" href="{% static 'css/styles_search.css' %}">
  <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
</head>

<div class="container">
  <h1 class="mt-2">Lista de productos</h1>
  <div class="d-flex justify-content-between ">
    <div>
      <a href="{% url 'agregar_producto' %}" class="btn btn-primary btn-sm mt-4"
       >Agregar Producto <img src="{% static 'img/add.svg' %}" width="22"
        /></a>
    </div>
    

    <form method="GET" action="{% url 'buscar_productos' %}">
      <div class="search-bar">
        <input type="text" class="" name="q" value="{{ query }}" placeholder="Buscar productos..." />
        <div class="actions">
          <button type="submit"><span class="material-icons">search</span></button>
        </div>
      </div>
    </form>

  </div>

  
  <table class="table table-striped table-responsive">
    <thead>
      <tr>
        <!-- nombre, descripción, precio, categoría y cantidad en stock -->
        <th scope="col">ID</th>
        <th scope="col">Nombre</th>
        <th scope="col">Descripción</th>
        <th scope="col">Precio</th>
        <th scope="col">Categoría</th>
        <th scope="col">Stock</th>
        <th scope="col" colspan="2">Opciones</th>
      </tr>
    </thead>
    <tbody>
      {% for producto in productos %}
      <tr>
        <th scope="row">{{producto.id_producto}}</th>
        <td>{{producto.nombre}}</td>
        <td>{{producto.descripcion}}</td>
        <td>{{producto.precio}}</td>
        <td>{{producto.categoria}}</td>
        <td>{{producto.stock}}</td>
        <td>
          <a
            href="{% url 'editar_producto' producto.pk %}"
            class="btn btn-block btn-success btn-sm"
            >Editar</a
          >
        </td>
        <td>
          <a
            href="{% url 'eliminar_producto' producto.pk %}"
            class="btn btn-block btn-danger btn-sm btn-eliminar-producto"
            >Eliminar</a
          >
        </td>
      </tr>
      {% empty %}
      {% if query %}
      <tr>
        <td colspan="7"><img src="{% static 'img/info.svg' %}" width="22" alt="icono de alerta"> No se encontraron productos para "{{ query }}"</td>
      </tr>
      {% else %}
      <tr>
        <td colspan="7"><img src="{% static 'img/info.svg' %}" width="22" alt="icono de alerta"> No hay productos registrados.</td>
      </tr>
      {% endif %}
      {% endfor %}
    </tbody>
  </table>
</div>

<script src="{% static 'js/validacion_eliminar_prod.js' %}"></script>


{% endblock main %}
