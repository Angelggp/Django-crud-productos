{% extends 'base.html' %} {% load static %} {% block title %} Productos Listados
{% endblock title %} {% block main %}

<div class="container">
  <h1 class="mt-2">Lista de productos</h1>
  <a href="{% url 'agregar_producto' %}" class="btn btn-primary btn-sm mt-4"
    >Agregar Producto <img src="{% static 'img/add.svg' %}" width="22"
  /></a>
  <table class="table table-striped table-responsive">
    <thead>
      <tr>
        <!-- nombre, descripción, precio, categoría y cantidad en stock -->
        <th scope="col">ID</th>
        <th scope="col">Nombre</th>
        <th scope="col">Descripción</th>
        <th scope="col">Precio</th>
        <th scope="col">Categoría</th>
        <th scope="col">Stock</th>
        <th scope="col" colspan="2">Opciones</th>
      </tr>
    </thead>
    <tbody>
      {% for producto in productos %}
      <tr>
        <th scope="row">{{producto.id_producto}}</th>
        <td>{{producto.nombre}}</td>
        <td>{{producto.descripcion}}</td>
        <td>{{producto.precio}}</td>
        <td>{{producto.categoria}}</td>
        <td>{{producto.stock}}</td>
        <td>
          <a
            href="{% url 'editar_producto' producto.pk %}"
            class="btn btn-block btn-success btn-sm"
            >Editar</a
          >
        </td>
        <td>
          <a
            href="{% url 'eliminar_producto' producto.pk %}"
            class="btn btn-block btn-danger btn-sm"
            id="btn-eliminar"
            >Eliminar</a
          >
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="7"><img src="{% static 'img/info.svg' %}" width="22" alt="icono de alerta"> No hay trabajadores registrados.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script>
  btn_eliminar_producto = document.getElementById("btn-eliminar");
  btn_eliminar_producto.forEach( btn => {
    btn.addEventListener("click", (e) => {
      const msg = confirm(
        "¿Estás seguro de que deseas eliminar este producto?"
      );
      if (!msg) {
        e.preventDefault();
      }
    });
  })();
</script>

{% endblock main %}
